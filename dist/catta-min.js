!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.catta=t():e.catta=t()}(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var o={form:"application/x-www-form-urlencoded",json:"application/json",multipart:"multipart/form-data",text:"text/plain"},i={method:"get",type:"",timeout:3,resultType:"json",cross:!0,credential:!0};function u(e){return"function"==typeof e}var a=function(){},c=function(){var e={request:"the request was failed, please confirm remote origin is correct",timeout:function(e){return"the request has been take over given time ("+e+")"},uploadFile:"Can't upload file without FormData support",notSupport:function(e){return"Current browser do not support "+e}};return function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var i,a=u(e[t])?e[t].apply(e,r):e[t];return{name:t,message:"[Catta]["+(i=t,i[0].toUpperCase()+i.slice(1))+" Error]: "+a}}}();function s(e,t){var n,o;if(e)return(n=e,o=function(e,n){if("object"===(void 0===e?"undefined":r(e))){var o=t?[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t)):[];return o.push(n),s(e,o)}if(e=encodeURIComponent(e),t){var i=void 0;return i=t.length>1?t[0]+"["+t.slice(1).join("][")+"]["+n+"]":t[0]+"["+n+"]",escape(i)+"="+e}return n+"="+e},Object.keys(n).map(function(e){var t=n[e];return o(t,e)})).join("&")}function f(e,t){return t&&(e+=(/\?/.test(e)?"&":"?")+s(t)),e}function d(e,t){if(t instanceof HTMLFormElement){if(!l.formData)throw new Error(utils.throwError("notSupport","FormData").message);return{data:new FormData(t)}}return"object"===(void 0===t?"undefined":r(t))?{contentType:o.form,data:"post"===e?s(t):t}:{contentType:o.text,data:t}}var p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!l.promise)throw new Error(c("notSupport","Promise").message);return"string"==typeof e&&(t.url=e),"object"===(void 0===e?"undefined":r(e))&&(t=e),n?Object.assign(i,t):Object.assign({},i,t)},l={promise:u(window.Promise),globalFetch:u(window.fetch),formData:u(window.FormData)},m=function(e){return new Promise(function(t,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(r.readyState===XMLHttpRequest.DONE)if(200===r.status){var o=void 0;o="json"===e.resultType?JSON.parse(r.responseText):"response"===e.resultType?r.response:r.responseText,t(o)}else 0===r.status?n(c("timeout",e.timeout+"s")):n(c("request"))};var o=d(e.method,e.data);"get"===e.method&&(e.url=f(e.url,o.data)),r.open(e.method.toUpperCase(),e.url),r.timeout=1e3*e.timeout+50,r.withCredentials=e.credential,o.contentType&&r.setRequestHeader("Content-Type",o.contentType),e.headers&&Object.keys(e.headers).forEach(function(t){r.setRequestHeader(t,e.headers[t])}),"post"===e.method?r.send(o.data):r.send()})},y=function(e){return new Promise(function(t,n){if(l.globalFetch){var r={};if(r.method=e.method.toUpperCase(),r.mode=e.cross?"cors":"same-origin",r.credentials=e.credential?"include":"same-origin",e.data){var o=d(e.method,e.data);o.contentType&&(r.headers={"Content-Type":o.contentType}),e.headers&&Object.assign(r.headers,e.headers),"post"===e.method?r.body=e.data:e.url=f(e.url,o.data)}var i=window.setTimeout(function(){n(c("timeout",e.timeout+"s"))},1e3*e.timeout+50);fetch(e.url,r).then(function(n){window.clearTimeout(i);var r=void 0;r="response"===e.resultType?n:"json"===e.resultType?n.json():n.text(),t(r)}).catch(function(e){window.clearTimeout(i),n(c("request"),e)})}else n(c("notSupport","GlobalFetch"))})},h=function(e){return new Promise(function(t,n){var r=e.jsonp||{},o=String(Math.random()).replace(".",""),i=r.callbackName||"jsonp"+o,u=e.url,s=document.body||document.head,d=document.createElement("script");d.src=f(u,Object.assign({callback:i},e.data)),d.onerror=function(){n(c("request")),window.clearTimeout(l)},s.appendChild(d);var p=function(){r.callbackName||(window[i]=a),s.removeChild(d)},l=window.setTimeout(function(){p(),n(c("timeout",e.timeout+"s"))},1e3*e.timeout+50);window[i]=function(){window.clearTimeout(l),t.apply(void 0,arguments),p()}})};n.d(t,"customAdapter",function(){return v}),n.d(t,"globalConfig",function(){return b}),n.d(t,"ajax",function(){return g}),n.d(t,"jsonp",function(){return j}),n.d(t,"fetch",function(){return T});var w={};t.default=function(e,t){if("ajax"===(t=p(e,t)).type)return m(t);if("jsonp"===t.type)return h(t);if("fetch"===t.type)return y(t);for(var n in w){var r=w[n];if(r.detector(t))return r.processor(t)}return l.globalFetch?y(t):m(t)};function v(e,t){w[e]=t}function b(e){p(null,e,!0)}function g(e,t){return t=p(e,t),m(t)}function j(e,t){return t=p(e,t),h(t)}function T(e,t){return t=p(e,t),y(t)}}])});